<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fjalla+One&display=swap" rel="stylesheet">
  <title>Programa computacional</title>
</head>

<body>
  <div class="contenedor">
    <div class="card">
      <div class="texto">
        <h1>
          Producto Integrador de Aprendizaje
        </h1>
        <h2>Cadena: bbb<sup>n</sup>a<sup>2n</sup>bb | n&ge;0</h2>
        <h2>Equipo #7 <br>Problema #7</h2>
        <br>
        <form action="">
          <input id="InputCadena" type="text" placeholder="Escribe la cadena que quieres verificar:">
          <button type="button" onclick="verificarCadena()">
            Validar Cadena
          </button>
        </form>
        <h3 id="cadenaValida" class="cadenaValida" style="display: none;">Cadena Valida</h3>
        <h3 id="cadenaInvalida" class="cadenaInvalida" style="display: none;">Cadena invalida, intenta con otra</h3>
      </div>
      <div class="animacion">
        <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
        <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_bniew9j6.json" background="transparent"
          speed="1" style="width: 300px; height: 300px;" loop autoplay></lottie-player>
      </div>
    </div>
  </div>
</body>
<script>

  const verificarCadena = () => {
    a = 'a'
    b = 'b';
    tamañoDeA = a.length;
    tamañoDeB = b.length;

    const input = document.getElementById("InputCadena");
    const value = input.value;
    let validador = 0;

    if (value.startsWith(b)) {
      validador++;
      console.log(1)
    }

    if (value.startsWith(b, tamañoDeB)) {
      validador++;
      console.log(2)
    }
    if (value.startsWith(b, tamañoDeB * 2)) {
      validador++;
      console.log(3)
    }
    if (value.endsWith(b, value.length - tamañoDeB)) {
      validador++;
      console.log(4)
    }
    if (value.endsWith(b)) {
      validador++;
      console.log(5)
    }

    var indicesDeB = [];
    var idx = value.indexOf(b, tamañoDeB * 2);

    while (idx != -1) {
      if (value.indexOf(b, idx + 1) - idx > 1) {
        indicesDeB.push(idx);
        var aux = idx;
        idx = -1;
      } else {
        indicesDeB.push(idx);
        idx = value.indexOf(b, idx + tamañoDeB)
      }
    }
    let auxiliarDeIndicesDeB = indicesDeB;
    var indicesDeA = [];
    var idx = value.indexOf(a);
    while (idx != -1) {
      if (value.indexOf(a, idx + 1) - idx > 1) {
        indicesDeA.push(idx);
        var aux = idx;
        idx = -1;
      } else {
        indicesDeA.push(idx);
        idx = value.indexOf(a, idx + tamañoDeA);
      }
    }
    if (indicesDeA.length == 0 && indicesDeB.length == 2) {
      validador++;
      console.log(6)
    }
    if (indicesDeA.length / indicesDeB.length == 2) {
      validador++;
      console.log(6)
    }
    if (indicesDeA == 0 && validador == 6) {
      validador = 8;
    }

    if (indicesDeA.length != 0) {
      var indicesDeB = [];
      var idx = value.indexOf(b, value.lastIndexOf(a) + tamañoDeA);
      while (idx != -1) {
        if (value.indexOf(b, idx + 1) - idx > 2) {
          indicesDeB.push(idx);
          var aux = idx;
          idx = -1;
        } else {
          indicesDeB.push(idx);
          idx = value.indexOf(b, idx + tamañoDeB);
        }
      }

      if (indicesDeB.length != 2) {
        validador--;
        console.log(5)
      }
    }
    if (indicesDeA != 0) {
      if (auxiliarDeIndicesDeB[auxiliarDeIndicesDeB.length - 1] + 1 == indicesDeA[0]) {
        validador++;
        console.log(7)
      }
      if (indicesDeA[indicesDeA.length - 1] + tamañoDeA == indicesDeB[0]) {
        validador++;
        console.log(8)
      }
    }

    if (validador == 8) {
      var elem = document.getElementById('cadenaValida');
      elem.style.display = "block";
      var elem = document.getElementById('cadenaInvalida');
      elem.style.display = "none";
    }
    else {
      var elem = document.getElementById('cadenaInvalida');
      elem.style.display = "block";
      var elem = document.getElementById('cadenaValida');
      elem.style.display = "none";
    }
  }
</script>
<style>
  body {
    margin: 0;
    margin-right: 0;
    padding: 0;
    background: rgb(131, 58, 180);
    background: linear-gradient(90deg, rgba(131, 58, 180, 1) 0%, rgba(253, 29, 29, 1) 50%, rgba(252, 176, 69, 1) 100%);
    ;
  }

  .contenedor {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .card {
    display: flex;
    flex-direction: row;
    align-items: center;
    margin-top: 13%;
    padding: 60px;
    background: rgba(255, 255, 255, 0.35);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    backdrop-filter: blur(8.5px);
    -webkit-backdrop-filter: blur(8.5px);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.18);
  }

  .animacion p {
    text-align: center;
  }

  .texto h1 {
    text-align: center;
    margin: auto;
    margin-bottom: 50px;
    color: rgba(0, 0, 0, 0.712);
    font-family: 'Fjalla One', sans-serif;
  }

  .texto h2,
  h4,
  h3 {
    font-family: 'Fjalla One', sans-serif;
    margin-bottom: 30px;
  }

  .cadenaInvalida,
  .cadenaValida {
    display: inline-flex;
    text-align: center;
    margin-top: 40px;
  }

  .texto form {
    display: flex;
    flex-direction: column;
    height: 100px;
    width: 100%;
    justify-content: space-evenly;
  }

  input {
    border-radius: 10px;
    border: 2px solid rgb(0, 0, 0);
    padding: 10px;
    color: rgb(0, 0, 0);
    font-size: 18px;
    background-color: rgba(255, 255, 255, 0);
  }

  ::placeholder {
    /* Chrome, Firefox, Opera, Safari 10.1+ */
    color: rgb(0, 0, 0);
    opacity: 1;
    /* Firefox */
  }

  :-ms-input-placeholder {
    /* Internet Explorer 10-11 */
    color: rgb(0, 0, 0);
  }

  ::-ms-input-placeholder {
    /* Microsoft Edge */
    color: rgb(0, 0, 0);
  }

  button {
    background-color: rgba(131, 58, 180, 1);
    border-radius: 30px;
    color: white;
    padding: 10px;
    margin-top: 30px;
    font-size: 18px;
    font-family: 'Fjalla One', sans-serif;
  }
</style>

</html>
